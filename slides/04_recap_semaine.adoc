[%notitle.columns.is-vcentered]
== Demarche
[.column]
_"Vous avez 3 semaines !"_

[.column]
image::images/run.png[width=100%]


[.text-is-centered]
=== Semaine 1
Livraison j-15

[.notes]
--
> Lancer le module de parsing des données

* On lance le programme avec les commandes de JFR : `-XX:StartFlightRecording=duration=200s,filename=flight.jfr`
* On lance JMC et on importe le fichier dedans -> permet d'analyser les classes les plus instanciées -> stacktrace (On voit la prédominance de `SimpleDateFormat` et des insertions dans la hashmap)
* Optimisation du code et relance pour comparer
--

[%notitle.columns.is-vcentered]
=== Semaine 1
image::images/recap_semaine.png[background, size=contain]

[.notes]
--
* Liste = simple, connu, attention au collector et aux très grandes collections
* Stream = rapide (multithread mais attention à la ram), pratique (filtres, etc)
* À ne "consommer" qu'à bon escient !
--

[%notitle.columns.is-vcentered]
=== Semaine 1
[.column]
Les listes, c'est bien...
[.column]
image::images/leonardo.png[size=contain]

[%notitle.columns.is-vcentered]
=== Semaine 1
[.column]
image::images/tom.png[size=contain]
[.column]
...les stream, c'est mieux ! (enfin, parfois)

[.text-is-centered]
=== Semaine 2
Livraison j-10

[.notes]
--
a compléter
--

[%notitle.columns.is-vcentered]
=== Semaine 2
image::images/recap_semaine.png[background, size=contain]

[%notitle.columns.is-vcentered]
=== Semaine 2
.Générer un dump mémoire
[.column.terminal]
****
[source, bash]
----
jmap -dump:[live],format=b,file=<file-path> <pid>

jcmd <pid> GC.heap_dump <file-path>

java -XX:+HeapDumpOnOutOfMemoryError #optionel : -Xmx1g
----
****

[.text-is-centered]
=== Semaine 3
Livraison j-5

[%notitle.columns.is-vcentered]
=== Semaine 3
image::images/recap_semaine.png[background, size=contain]

[%notitle.columns.is-vcentered]
=== pg_stat_statements

[.column.is-one-fifth]
image::images/terminal.png[width=50%]

[.column.terminal]
****
[source, bash]
----
sudo vi /etc/postgresql/13/data/postgresql.conf
shared_preload_libraries = 'pg_stat_statements' # (change requires restart)
sudo systemctl restart postgresql-13
psql -U postgres -c "create extension pg_stat_statements;"
psql -U postgres -c "select pg_stat_statements_reset()"
----
****
